# Компонент фильтрации новостей для Битрикс через AJAX

## Описание задачи

Создание компонента для Битрикс, который выводит список элементов инфоблока "Новости" с возможностью фильтрации по названию, стоимости и дате активности с использованием AJAX.

## Шаги реализации

### 1. Установка Битрикс
- Установите виртуальную машину BitrixVM с официального сайта
- Следуйте инструкциям по установке на https://www.1c-bitrix.ru/download/vmbitrix.php

### 2. Создание инфоблока "Новости"
- В административной панели перейдите в "Контент" → "Инфоблоки" → "Типы инфоблоков"
- Создайте новый тип инфоблока или используйте существующий
- Перейдите в "Инфоблоки" и создайте новый инфоблок "Новости"
- Настройки инфоблока:
  - Название: Новости
  - Символьный код: news (или другой, например, news2 если news ранее был создан)
  - Тип инфоблока: Новости
- Добавьте свойства:
  - COST (Стоимость) - тип: Число, чекбокс Обяз.[x], в дополнительных настройках можно установить Значение по умолчанию: 0
  - FEATURE (Особенность) - тип: Строка, чекбокс Обяз.[x]

### 3. Создание структуры компонента
Создайте следующую структуру файлов в папке `/local/components/yourcompany/`:

```
news.list/
  ├── component.php
  └── templates/
      └── .default/
          ├── .parameters.php
          ├── style.css
          └── template.phps
```

### 4. Создание AJAX-обработчика
Создайте файл `/local/ajax/news_filter.php` для обработки AJAX-запросов.

### 5. Код компонента

#### component.php
```php
<?
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED !== true) {
    die();
}

// ... (основной код компонента)
```

#### template.php
```php
<?if(!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true)die();
// ... (код шаблона с формой фильтрации)
```

#### news_filter.php
```php
<?php
define('BX_SESSION_NO_START', true);
require_once($_SERVER['DOCUMENT_ROOT'].'/bitrix/modules/main/include/prolog_before.php');
// ... (код обработки AJAX-запросов)
```

### 6. Размещение компонента на странице
Используйте вызов компонента в нужном месте шаблона:
```php
<?$APPLICATION->IncludeComponent(
    "yourcompany:news.list", 
    "", 
    array(
        "IBLOCK_ID" => "X", // ID вашего инфоблока
        // другие параметры
    ),
    false
);?>
```

## Особенности реализации

1. **AJAX-фильтрация**: Фильтрация происходит без перезагрузки страницы
2. **Фильтры**:
   - Поиск по названию
   - Фильтр по стоимости (от и до)
   - Фильтр по дате (вся история, этот месяц, эта неделя)
3. **Безопасность**: Проверка прав доступа и валидация входных данных
4. **Производительность**: Кэширование запросов для уменьшения нагрузки

## Важные замечания

1. Убедитесь, что у веб-сервера есть права на запись в файлы логов
2. Проверьте соответствие часовых поясов в настройках Битрикс и сервера
3. Для корректной работы фильтра по дате убедитесь, что в элементах инфоблока заполнено поле "ACTIVE_FROM"
4. Очищайте кэш после обновления компонента через "Сайт" → "Очистить кэш" в админке

## Тестирование

1. Создайте несколько тестовых элементов новостей с разными датами
2. Проверьте работу всех фильтров по отдельности и в комбинации
3. Убедитесь, что AJAX-запросы выполняются корректно
4. Проверьте отображение результатов на разных устройствах и в разных браузерах

Компонент готов к использованию и позволяет удобно фильтровать новости по различным параметрам с обновлением результатов без перезагрузки страницы.
